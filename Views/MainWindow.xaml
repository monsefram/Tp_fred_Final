<Window x:Class="Tp_Final_Fred.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:Tp_Final_Fred.ViewModels"
        xmlns:local="clr-namespace:Tp_Final_Fred.Services"
        Title="Météo" Width="1100" Height="700">

    <Window.Resources>
        <local:WeatherIconConverter x:Key="WeatherIconConverter"/>
    </Window.Resources>



    <DockPanel>

        <Menu DockPanel.Dock="Top">
            <MenuItem Header="Configuration" Click="OpenConfig_Click"/>
        </Menu>

        <Grid Margin="10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="250"/>
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>


            <!-- LEFT PANEL -->
            <StackPanel Grid.Column="0">

                <ListBox ItemsSource="{Binding Regions}"
                         SelectedItem="{Binding SelectedRegion}"
                         Height="250" />

                <TextBlock Text="Région :" Margin="0,10,0,0"/>
                <TextBox Text="{Binding RegionName}" />

                <TextBlock Text="Latitude :" Margin="0,10,0,0"/>
                <TextBox Text="{Binding Latitude}" />

                <TextBlock Text="Longitude :" Margin="0,10,0,0"/>
                <TextBox Text="{Binding Longitude}" />

                <Button Content="+" Width="40" Height="40"
                        Margin="0,10,0,0"
                        Click="AddRegion_Click"/>
            </StackPanel>


            <!-- RIGHT PANEL (affichage météo 7 jours) -->
            <ScrollViewer Grid.Column="1" Margin="30,0,0,0">
                <StackPanel>

                    <!-- Région sélectionnée -->
                    <TextBlock Text="{Binding SelectedRegion}"
                               FontSize="22"
                               FontWeight="Bold"
                               Margin="0,0,0,20"/>




                    <!-- LISTE DES 7 JOURS -->
                    <ItemsControl ItemsSource="{Binding Forecast}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>

                                <StackPanel Orientation="Horizontal" Margin="0,10">

                                    <StackPanel Width="150">
                                        <TextBlock Text="{Binding Date}"
                                                   FontSize="18"
                                                   FontWeight="Bold"/>
                                        <TextBlock Text="Max :" FontWeight="Bold"/>
                                        <TextBlock Text="{Binding TempMax}"/>

                                        <TextBlock Text="Min :" FontWeight="Bold" Margin="0,5,0,0"/>
                                        <TextBlock Text="{Binding TempMin}"/>
                                    </StackPanel>

                                    <Image Width="60" Height="60"
                                           Source="{Binding Icon, Converter={StaticResource WeatherIconConverter}}"/>

                                </StackPanel>

                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>

                </StackPanel>
            </ScrollViewer>

        </Grid>

    </DockPanel>

</Window>
